---
title: Start your new react project.
date: 2020-02-27
published: true
---

### **Start your new react project.**

###### A setup with Typescript, Babel, Eslint and Prettier.

En casi todos los nuevos proyectos que comienzo con React, siempre me hago la pregunta de qué boilerplate/setup usar habiendo tantas opciones como `create-react-app`,  `next.js`, `react-boilerplate` y muchas más.

Lo que hasta ahora me ha funcionado es comenzar un proyecto con lo mínimo requerido. En estos días casi todo proyecto en react se desarrolla en typescript, así que este setup se hará con este lenguage, pero puede funcionar con solo javascript también. Para poder compilarlo, usaré babel y webpack. Y algo super importante para mejorar el desarrollo, es el uso de eslint y prettier, para evitar errores de syntaxis.

He seguido muchos tutoriales en los que solo instalo cosas sin saber para qué son. Por eso lo que quiero recalcar en este pequeño tutorial es el para qué y por qué de cada dependencia que instalaré. 

Empecemos.

Crearemos un nuevo folder e inicializaremos un proyecto de npm.

```bash
# Make a new directory and move into it 
mkdir new-react-app && cd new-react-app

# Initialise a new npm project with defaults
npm init -y
```

Ahora deberíamos tener dentro de nuestra carpeta un archivo `package.json`. 

1. ##### Empezaremos con la configuración de webpack y babel.

   ```bash
   # Install webpack 
   npm install --save-dev webpack webpack-cli webpack-dev-server
   
   # Install the html webpack plugin
   npm install --save-dev html-webpack-plugin
   ```

   Profundicemos un poco en estas dependencias

   **webpack**: Es un empaquetador de módulos (bundler). Al procesar nuestra aplicación construye una dependencia de grafos que incluye todos los módulos que nuestra aplicación necesite y genera uno o más bundles dependiendo de nuestra configuración.

   **webpack-cli**: Podremos acceder a una serie de comandos que agilizarán nuestro proceso de desarrollo.

   **webpack-dev-server**: Nos permite usar webpack en un servidor de desarrollo.

   **html-webpack-plugin**: Simplifica la creacion de archivos HTML para servir los bundles generados por webpack.

   ```bash
   # Install babel
   npm i --save-dev @babel/core babel-loader @babel/preset-env @babel/preset-react @babel/preset-typescript
   ```

   **babel**: Es una herramienta que nos permite convertir código Javascript en una versión compatible para viejos navegadores.

   **babel-loader**: Este paquete permite transformar nuestro código usando Babel y Webpack.

    Un preset en babel es una herramienta para soportar cierto lenguage en particular.

   **@babel/preset-env:** Te permite usar los últimos features de Javascript.

   **@babel/preset-react:** Añade soporte para JSX.

   **@babel/preset-typescript:** Añade soporte para typescript.

   

   Crearemos un archivo `webpack.config.js`en el root de nuestra app.

   ```javascript
   const path = require('path');
   const HtmlWebpackPlugin = require('html-webpack-plugin');
   
   module.exports = {
     entry: './src/app.tsx',
     resolve: {
       extensions: ['.ts', '.tsx', '.js'],
     },
     module: {
       rules: [
         {
           test: /\.(ts|tsx)$/,
           exclude: /node_modules/,
           use: {
             loader: 'babel-loader',
           },
         },
       ],
     },
     devServer: {
       contentBase: path.join(__dirname, 'build'),
       historyApiFallback: true,
       host: '0.0.0.0',
       compress: true,
       hot: true,
       port: 3000,
       publicPath: '/',
     },
     devtool: 'source-map',
     output: {
       filename: '[name].bundle.js',
       publicPath: '/',
       path: path.resolve(__dirname, 'build'),
     },
     plugins: [
       new HtmlWebpackPlugin({
         template: path.join(__dirname, 'index.html'),
       }),
     ],
   };
   
   ```

   Claro, que este archivo de webpack es bastante básico, pero por ahora nos servirá.

   Creemos nuestro `index.html` en el root del proyecto.

   Nuestro `index.html` debería lucir así.

   ```html
   <!DOCTYPE html>
   <html>
     <head>
       <meta charset="utf-8" />
       <meta http-equiv="X-UA-Compatible" content="IE=edge">
       <title>My app with Typescript and React</title>
       <meta name="viewport" content="width=device-width, initial-scale=1">
     </head>
     <body>
       <div id="root"></div>
     </body>
   </html>
   ```

   Ahora creemos un archivo `babel.config.js`

   ```javascript
   module.exports = {
     presets: [
       '@babel/preset-env',
       '@babel/preset-react',
       '@babel/preset-typescript',
     ],
   };
   ```

   En nuestro `package.json` tenemos que añadir algunos scripts para poder correr nuestra app y generar nuestro archivo `build`.

   ```javascript
   // package.json
   
   {
     "scripts": {
       "start": "webpack-dev-server --mode development",
       "build": "webpack --mode production",
     },
   }
   
   ```

2. ##### Typescript y react.

   Typescript es una lenguaje de programación desarrollado por Microsoft. Es un superconjunto de Javascript, lo que significa que extiende la sintaxis de este, añadiendo tipos estáticos y objetos basados en clases.

   Hoy en día typescript se ha convertido en uno de los lenguajes más populares. Según *The State of Js 2019*, typescript obtuvo un nivel de satisfacción de 89%, y casi el 60% afirmó que lo volvería a usar.

   Poder saber qué argumentos recibe tu función sin tener que cambiar entre archivos o saber que te falta pasarle cierta propiedad a un componente para que funcione son algunas de las ventajas que tendrás al usar typescript en tu proyecto.

   ```bash
   # Install typescript
   npm install typescript
   
   #Install the react dependencies
   npm install react react-dom @types/react @types/react-dom
   ```

   **@types/react y @types/react-dom:** Permite tener acceso a los types de estas dos librerías. 

   Creemos un carpeta `src` y dentro un archivo `app.tsx`.

   ```bash
   mkdir src
   cd src
   touch app.tsx
   ```

   Nuestro archivo `app.tsx` puede ser tan simple como esto.

   ```jsx
   import React from 'react';
   import ReactDom from 'react-dom';
   
   const App = () => <p>hello world</p>;
   
   ReactDom.render(<App />, document.getElementById('root') as HTMLElement);
   
   ```

   Ahora tenemos que crear un archivo `tsconfig.json` que es un archivo de configuración para compilar typescript.

   ```json
   {
     "compilerOptions": {
       "allowSyntheticDefaultImports": true,
       "noImplicitAny": true,
       "moduleResolution": "node",
       "baseUrl": "./",
       "sourceMap": true,
       "module": "esnext",
       "target": "esnext",
       "jsx": "react",
       "allowJs": true,
       "noEmit": true,
       "noImplicitThis": true,
       "strictNullChecks": true,
       "lib": ["es6", "dom"],
     },
   }
   ```

3. ##### Un mejor entorno de desarrollo con Eslint y Prettier.

   Eslint es una herramienta de linting para Javascript. Analiza tu código estáticamente, sin ejecutarlo,  buscando errores de syntaxis o malas prácticas, para evitar futuros problemas de compilación.

   Prettier formatea tu código. Permite que todo tu proyecto tenga el mismo estilo, ya sea usando comillas simples o una identación de dos espacios. Estas reglas estarán presentes en todo el proyecto agilizando el desarrollo.

   ```bash
   # Instalemos eslint y prettier
   npm install --save-dev eslint prettier
   
   # Ahora instalemos los plugins y presets necesarios de eslint
   npm install --save-dev eslint-config-prettier eslint-plugin-prettier eslint-plugin-react @typescript-eslint/eslint-plugin @typescript-eslint/parser
   ```

   ###### eslint-config-prettier:

   ###### eslint-plugin-prettier:

   ###### eslint-plugin-react:

   ###### @typescript-eslint/eslint-plugin:

   ###### @typescript-eslint/parser:

   Crearemo un archivo de configuración para Eslint, llamado `.eslintrc.js` en la raíz de nuestro proyecto. Aquí irán todas las reglas que deseemos activar.

   ```javascript
   module.exports =  {
     parser:  '@typescript-eslint/parser',
     extends:  [
       'plugin:react/recommended',
       'plugin:@typescript-eslint/recommended',
       'plugin:prettier/recommended',
     ],
     parserOptions:  {
       ecmaVersion:  2018,
       sourceType:  'module',
     },
     plugins: ["prettier"],
     rules: {
       "prettier/prettier": [
         "error",
         {
           singleQuote: true,
           trailingComma: 'all',
         }
       ],
       'react/prop-types': [
         1,
         {
           ignore: ['context', 'tracking'],
         },
       ],
     },
     settings: {
       "react": {
         "version": "detect",
       },
     },
     overrides: [
       {
         files: ['*.ts', '*.tsx'],
         rules: {
           'react/prop-types': 'off',
         },
       },
     ],
   };
   ```

   Ahora para mejorar mucho más nuestro entorno de trabajo. Vamos a añadir en la configuración de VS Code la opción de poder formatear nuestro código al guardarlo.

   Crearemos una carpeta `.vscode` en la raíz y dentro de esta añadiremos un archivo `settings.json`.

   ```json
   {
     "eslint.validate": [
       "javascript",
       "javascriptreact",
       "Babel Javascript",
       "typescript",
       "typescriptreact",
     ],
     "eslint.alwaysShowStatus": true,
     "editor.codeActionsOnSave": {
       "source.fixAll.eslint": true
     },
   }
   ```


Ahora bastará con correr `npm start` para poder visualizar el `hello world` en nuestro navegador.